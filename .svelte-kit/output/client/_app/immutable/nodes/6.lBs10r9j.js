import"../chunks/CWj6FrbW.js";import"../chunks/BUd4d-LD.js";import{ap as re,_ as te,a7 as se,aq as oe,ar as le,R as ne,t as U,v as k,x as n,V as r,B as a,w as h,T as ve,F as v,W as m,y as d,as as de,z as ue,X as Y}from"../chunks/CrvXbrvd.js";import{l as ce,e as me,s as G}from"../chunks/Dcj7EJXu.js";import{i as M}from"../chunks/CuKpEqi_.js";import{i as pe,r as y}from"../chunks/1xChGMt5.js";import{b as w}from"../chunks/B1UZVbEk.js";function H(i,s,p=!1){if(i.multiple){if(s==null)return;if(!se(s))return oe();for(var o of i.options)o.selected=s.includes(x(o));return}for(o of i.options){var l=x(o);if(le(l,s)){o.selected=!0;return}}(!p||s!==void 0)&&(i.selectedIndex=-1)}function _e(i){var s=new MutationObserver(()=>{H(i,i.__value)});s.observe(i,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),te(()=>{s.disconnect()})}function fe(i,s,p=s){var o=!0;ce(i,"change",l=>{var c=l?"[selected]":":checked",f;if(i.multiple)f=[].map.call(i.querySelectorAll(c),x);else{var g=i.querySelector(c)??i.querySelector("option:not([disabled])");f=g&&x(g)}p(f)}),re(()=>{var l=s();if(H(i,l,o),o&&l===void 0){var c=i.querySelector(":checked");c!==null&&(l=x(c),p(l))}i.__value=l,o=!1}),_e(i)}function x(i){return"__value"in i?i.__value:i.value}var ge=U('<div class="error svelte-1oieimg"> </div>'),be=U('<div class="success svelte-1oieimg"> </div>'),he=U('<div class="auth-container svelte-1oieimg"><div class="auth-card svelte-1oieimg"><h1 class="svelte-1oieimg">Crear cuenta</h1> <form><div class="form-group svelte-1oieimg"><label for="name" class="svelte-1oieimg">Nombre completo</label> <input type="text" id="name" required placeholder="Juan P√©rez" class="svelte-1oieimg"/></div> <div class="form-group svelte-1oieimg"><label for="username" class="svelte-1oieimg">Usuario</label> <input type="text" id="username" required placeholder="juanperez123" class="svelte-1oieimg"/></div> <div class="form-group svelte-1oieimg"><label for="email" class="svelte-1oieimg">Correo electr√≥nico</label> <input type="email" id="email" required placeholder="correo@ejemplo.com" class="svelte-1oieimg"/></div> <div class="form-group svelte-1oieimg"><label for="password" class="svelte-1oieimg">Contrase√±a</label> <input type="password" id="password" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" class="svelte-1oieimg"/></div> <div class="form-group svelte-1oieimg"><label for="password_confirmation" class="svelte-1oieimg">Confirmar contrase√±a</label> <input type="password" id="password_confirmation" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" class="svelte-1oieimg"/></div> <div class="form-group svelte-1oieimg"><label for="role_id" class="svelte-1oieimg">Rol</label> <select id="role_id" required class="svelte-1oieimg"><option>Estudiante</option><option>Maestro</option></select></div> <!> <!> <button type="submit" class="btn-primary svelte-1oieimg"><!></button></form> <div class="auth-links svelte-1oieimg"><a href="/login" class="svelte-1oieimg">¬øYa tienes cuenta? Inicia sesi√≥n</a></div></div></div>');function Re(i,s){ne(s,!1);let p=m(""),o=m(""),l=m(""),c=m(""),f=m(""),g=m("2"),u=m(!1),b=m(""),q=m("");const K="http://127.0.0.1:8000/api";async function Q(e){e.preventDefault(),v(b,""),v(q,""),v(u,!0);try{const t=await fetch(`${K}/register`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({name:a(p),username:a(o),email:a(l),password:a(c),password_confirmation:a(f),role_id:a(g)})}),_=await t.json();t.ok?(v(q,"Registro exitoso üéâ"),localStorage.setItem("auth_token",_.access_token),localStorage.setItem("token_type",_.token_type),localStorage.setItem("user",JSON.stringify(_.user)),setTimeout(()=>{window.location.href="/"},500)):v(b,_.message||"Error en el registro")}catch{v(b,"No se pudo conectar con el servidor")}finally{v(u,!1)}}pe();var I=he(),D=n(I),R=r(n(D),2),j=n(R),C=r(n(j),2);y(C),d(j);var A=r(j,2),N=r(n(A),2);y(N),d(A);var O=r(A,2),T=r(n(O),2);y(T),d(O);var z=r(O,2),E=r(n(z),2);y(E),d(z);var J=r(z,2),L=r(n(J),2);y(L),d(J);var P=r(J,2),S=r(n(P),2);k(()=>{a(g),de(()=>{a(u)})});var B=n(S);B.value=B.__value="2";var V=r(B);V.value=V.__value="3",d(S),d(P);var W=r(P,2);{var Z=e=>{var t=ge(),_=n(t,!0);d(t),k(()=>G(_,a(b))),h(e,t)};M(W,e=>{a(b)&&e(Z)})}var X=r(W,2);{var $=e=>{var t=be(),_=n(t,!0);d(t),k(()=>G(_,a(q))),h(e,t)};M(X,e=>{a(q)&&e($)})}var F=r(X,2),ee=n(F);{var ae=e=>{var t=Y("Registrando...");h(e,t)},ie=e=>{var t=Y("Registrarse");h(e,t)};M(ee,e=>{a(u)?e(ae):e(ie,!1)})}d(F),d(R),ue(2),d(D),d(I),k(()=>{C.disabled=a(u),N.disabled=a(u),T.disabled=a(u),E.disabled=a(u),L.disabled=a(u),S.disabled=a(u),F.disabled=a(u)}),w(C,()=>a(p),e=>v(p,e)),w(N,()=>a(o),e=>v(o,e)),w(T,()=>a(l),e=>v(l,e)),w(E,()=>a(c),e=>v(c,e)),w(L,()=>a(f),e=>v(f,e)),fe(S,()=>a(g),e=>v(g,e)),me("submit",R,Q),h(i,I),ve()}export{Re as component};
