import"../chunks/CWj6FrbW.js";import"../chunks/BGmNO-Kf.js";import{ar as ae,t as re,ad as te,as as se,at as oe,W as D,X as x,Z as v,ao as t,a,Y as k,s as d,m,_ as u,au as le,a0 as ie,aq as Z}from"../chunks/C2U4IKIp.js";import{l as ne,e as ve,s as B}from"../chunks/B6thhSHX.js";import{i as Y}from"../chunks/ly8UQ4rw.js";import{r as g}from"../chunks/IJEFhr2z.js";import{b as h}from"../chunks/Ca9TkKAE.js";function G(r,s,p=!1){if(r.multiple){if(s==null)return;if(!te(s))return se();for(var i of r.options)i.selected=s.includes(y(i));return}for(i of r.options){var n=y(i);if(oe(n,s)){i.selected=!0;return}}(!p||s!==void 0)&&(r.selectedIndex=-1)}function de(r){var s=new MutationObserver(()=>{G(r,r.__value)});s.observe(r,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),re(()=>{s.disconnect()})}function ue(r,s,p=s){var i=!0;ne(r,"change",n=>{var c=n?"[selected]":":checked",f;if(r.multiple)f=[].map.call(r.querySelectorAll(c),y);else{var l=r.querySelector(c)??r.querySelector("option:not([disabled])");f=l&&y(l)}p(f)}),ae(()=>{var n=s();if(G(r,n,i),i&&n===void 0){var c=r.querySelector(":checked");c!==null&&(n=y(c),p(n))}r.__value=n,i=!1}),de(r)}function y(r){return"__value"in r?r.__value:r.value}var ce=D('<div class="error svelte-10n7mko"> </div>'),me=D('<div class="success svelte-10n7mko"> </div>'),pe=D('<div class="auth-container svelte-10n7mko"><div class="auth-card svelte-10n7mko"><h1 class="svelte-10n7mko">Crear cuenta</h1> <form><div class="form-group svelte-10n7mko"><label for="name" class="svelte-10n7mko">Nombre completo</label> <input type="text" id="name" required placeholder="Juan P√©rez" class="svelte-10n7mko"/></div> <div class="form-group svelte-10n7mko"><label for="username" class="svelte-10n7mko">Usuario</label> <input type="text" id="username" required placeholder="juanperez123" class="svelte-10n7mko"/></div> <div class="form-group svelte-10n7mko"><label for="email" class="svelte-10n7mko">Correo electr√≥nico</label> <input type="email" id="email" required placeholder="correo@ejemplo.com" class="svelte-10n7mko"/></div> <div class="form-group svelte-10n7mko"><label for="password" class="svelte-10n7mko">Contrase√±a</label> <input type="password" id="password" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" class="svelte-10n7mko"/></div> <div class="form-group svelte-10n7mko"><label for="password_confirmation" class="svelte-10n7mko">Confirmar contrase√±a</label> <input type="password" id="password_confirmation" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" class="svelte-10n7mko"/></div> <div class="form-group svelte-10n7mko"><label for="role_id" class="svelte-10n7mko">Rol</label> <select id="role_id" required class="svelte-10n7mko"><option>Estudiante</option><option>Maestro</option></select></div> <!> <!> <button type="submit" class="btn-primary svelte-10n7mko"><!></button></form> <div class="auth-links svelte-10n7mko"><a href="/login" class="svelte-10n7mko">¬øYa tienes cuenta? Inicia sesi√≥n</a></div></div></div>');function we(r){let s=m(""),p=m(""),i=m(""),n=m(""),c=m(""),f=m("2"),l=m(!1),b=m(""),w=m("");async function H(e){e.preventDefault(),d(b,""),d(w,""),d(l,!0);try{const o=await fetch("http://localhost:8000/api/register",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({name:a(s),username:a(p),email:a(i),password:a(n),password_confirmation:a(c),role_id:a(f)})}),_=await o.json();o.ok?(d(w,"Registro exitoso üéâ"),localStorage.setItem("auth_token",_.access_token),localStorage.setItem("token_type",_.token_type),localStorage.setItem("user",JSON.stringify(_.user)),setTimeout(()=>{window.location.href="/"},1500)):d(b,_.message||"Error en el registro")}catch{d(b,"No se pudo conectar con el servidor")}finally{d(l,!1)}}var S=pe(),F=v(S),j=t(v(F),2),C=v(j),I=t(v(C),2);g(I),u(C);var N=t(C,2),O=t(v(N),2);g(O),u(N);var R=t(N,2),J=t(v(R),2);g(J),u(R);var T=t(R,2),z=t(v(T),2);g(z),u(T);var A=t(T,2),E=t(v(A),2);g(E),u(A);var L=t(A,2),q=t(v(L),2);x(()=>{a(f),le(()=>{a(l)})});var M=v(q);M.value=M.__value="2";var U=t(M);U.value=U.__value="3",u(q),u(L);var W=t(L,2);{var K=e=>{var o=ce(),_=v(o,!0);u(o),x(()=>B(_,a(b))),k(e,o)};Y(W,e=>{a(b)&&e(K)})}var X=t(W,2);{var Q=e=>{var o=me(),_=v(o,!0);u(o),x(()=>B(_,a(w))),k(e,o)};Y(X,e=>{a(w)&&e(Q)})}var P=t(X,2),V=v(P);{var $=e=>{var o=Z("Registrando...");k(e,o)},ee=e=>{var o=Z("Registrarse");k(e,o)};Y(V,e=>{a(l)?e($):e(ee,!1)})}u(P),u(j),ie(2),u(F),u(S),x(()=>{I.disabled=a(l),O.disabled=a(l),J.disabled=a(l),z.disabled=a(l),E.disabled=a(l),q.disabled=a(l),P.disabled=a(l)}),h(I,()=>a(s),e=>d(s,e)),h(O,()=>a(p),e=>d(p,e)),h(J,()=>a(i),e=>d(i,e)),h(z,()=>a(n),e=>d(n,e)),h(E,()=>a(c),e=>d(c,e)),ue(q,()=>a(f),e=>d(f,e)),ve("submit",j,H),k(r,S)}export{we as component};
